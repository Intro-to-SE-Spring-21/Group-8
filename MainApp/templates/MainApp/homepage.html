

{% extends "MainApp/base_homepage.html" %}

<!-- Navbar -->
{% block navbar %}
<div class="topnav">
  {% if validSession %}
    <a href="#">Followers {{followed_by_len}}</a>
    <a href="#">Following {{following_len}}</a>
  {% endif %} 

  <a href=".">Refresh</a>  

  {% if validSession %}
  <a href="{% url 'MainApp:logout' %}" style="float:right">Logout</a>
  {% else %}
  <a href="{% url 'MainApp:register' %}" style="float:right">Register</a>
  <a href="{% url 'MainApp:login' %}" style="float:right">Login</a>
  <!--Commenting out the modal button for now -->
  <!--<button style="float: right;">Login</button>--><!-- https://www.w3schools.com/howto/howto_css_modals.asp Code for making a modal popup window -->

  {% endif %}

</div>
{% endblock %}


<!-- Right Column -->
<!-- Tweet button to only work if user is logged in -->

{% block TweetForm %}
<form class="tweet" name="generate_tweet" method="POST" action="{% url 'MainApp:homepage' %}">
  {% csrf_token %}
  {{ tweet }}
  <div style="border-top-color:rgb(58, 63, 66);
  border-top-style: solid; 
  border-top-width: 1px;
  padding-top: 15px;
  clear: both;">

  {% if validSession %}
    <button class="tweet_button" name="submit_tweet" type="submit">Tweet</button>
  {% else %}
    <button class="tweet_button" name="submit_tweet" type="submit" style="background-color: rgb(29,161,242,0.50); border-color: rgb(29,161,242,0.50); color: rgba(248, 248, 255, 0.50); cursor: unset;" disabled>Tweet</button>
  {% endif %}

  </div>
  <div style="clear: both;"></div>
</form>

{% endblock %}


<!-- Card that holds Profile information -->
{% block Profile_Card %}
  {% if validSession %}
  <a href="{% url 'MainApp:profile' user %}" style="text-decoration: none;
  outline: none;">
    <div class="card">
      <!--<div class="fakeimg" style="width: 30%; float: left;">Profile pic.</div>-->
      <div class="defaultimg" style="height:100%;width:100%"> <img src = "https://simplyilm.com/wp-content/uploads/2017/08/temporary-profile-placeholder-1.jpg" alt="DefaultPic" class="center"> </div>
      <div style="text-align: center; width: 100%; float: left;">
        <h2>{{user.first_name}} {{user.last_name}}</h2>
        <h3 style="color: rgb(99, 99, 99);">@{{user.username}}</h3>
      </div>
      <div style="clear: both;"></div>
    </div>
  </a>
  {% endif %}
{% endblock %}

<!-- Card showing 'Who to Follow' -->
{% block User_List %}
<div class="card" style="padding-left: 0%; padding-right: 0%;">
  <!--<div class="header" style="text-align: left; padding-left: 20px;"><h3>Who to Follow</h3></div> -->
  <div class="header" style="text-align: left; padding-left: 20px;"><h3>Other users on the network</h3></div>
  {% for user_dict in whoToFollow %}
      {% for user,alreadyFollow in user_dict.items %}

        <div class="foreignaccount">
          <div class="defaultimg" style="height:10%;width:10%; float:left;"> <img src = "https://simplyilm.com/wp-content/uploads/2017/08/temporary-profile-placeholder-1.jpg" alt="DefaultPic" width="70" height="70"></div>
          <a href="/profile/{{user.username}}/" style="width: 70%; float: left; padding-left: 70px;">
            <h2>{{user.first_name}} {{user.last_name}}</h2>
            <h3 style="color: rgb(99, 99, 99);">@{{user.username}}</h3>
          </a>
          <div style="width: 30%; float: right;"> 
            <form method="post" action="{% url 'MainApp:profile' user.username %}">
              {% csrf_token %}
                {% if not alreadyFollow %}
                  <button name="follow" type="submit" style="float:right" value={{user.username}} class="follow_button">Follow</button>
                {% else %}
                  <button name="unfollow" type="submit" style="float:right" value={{user.username}} class="follow_button">UnFollow</button>
                {% endif %}
            </form>
          </div>
          <div style="clear: both;"></div>
        </div>

      {% endfor %}
  {% endfor %}

  <div class="link" style="padding-left: 20px;"><p>Show More</p></div>
  
</div>
{% endblock %}

<!-- Tweets that are being shown to screen -->
{% block Live_Scroll %}

  {% for post in tweetFeed %}
    {% if forloop.counter0 < 25 %}
      {% load nbsp %}
      <div class="post">
        <!--<div class="fakeimg" style="width: 10%; height: 100%; float: left;">Place Holder</div>-->
        <div class="defaultimg" style="height:10%;width:10%; float:left;"> <img src = "https://simplyilm.com/wp-content/uploads/2017/08/temporary-profile-placeholder-1.jpg" alt="DefaultPic" width="70" height="70"></div>
        <div style="float: left; width: 90%; padding-left: 10px;">
          <span style="font-size: 20px; font-weight: bold;">{{post.tweet_creator.first_name}} {{post.tweet_creator.last_name}}</span>
          <span style="font-size: 20px; color: rgb(99, 99, 99);">@{{post.tweet_creator.username}}</span>
          <span style="font-size: 20px; color: rgb(99, 99, 99);"> - {{post.pub_date}}</span>
          <div style="word-wrap: break-word; padding-top: 5px; line-height: 130%;">{{ post.visible_info | linebreaksbr | nbsp }}</div>
          <div class="fakeimg" style="height:60px;">Image</div>
        </div>
        <button class="like">Like</button>
        <div style="clear: both;"></div>
      </div>
    {% endif %}
  {% endfor %}

{% endblock %}


